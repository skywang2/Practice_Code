# epoll demo开发
---

1. 创建一个多进程、多连接的使用epoll的IO复用进程
2. 端口号3333，监听主机所有ip
3. 项目构建：
```bash
mkdir build
cd build
cmake ..
```
4. 可执行文件存放于build/bin/文件夹
5. LT模式
    - EPOLLIN读事件，每次读取需要的数量即可，不必循环到read为0或-1，错误码为EWOULDBLOCK/EAGAIN
    - EPOLLOUT写事件，不能在一开始就注册写事件。正确做法是先直接调用send/write，如果没法一次发完，就将剩余数据缓存起来，在将socket注册写事件，在下一次事件触发时发出去，一旦数据发完写事件要及时移除，避免反复触发
6. ET模式
    - EPOLLIN读事件，每次读必须读完一整个报文，因为读事件只触发一次，后续不一定有机会触发
    - EPOLLOUT写事件，写数据一次没写完，需要重新注册事件，使得下一次循环可以再次触发写事件
    